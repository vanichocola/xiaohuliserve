(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-21786132"],{"08e6":function(e,t,a){var r=a("a493"),i=a("9760"),s=a("ea56"),l=a("6695"),n=a("091c"),o=a("6fb3"),c=a("3c71").f,p=a("bb38"),u=a("68d3"),d=a("f8b7"),h=a("497f"),g=a("84e8"),m=a("9c78"),f=a("e549"),v=a("8241"),b=a("985f"),y=a("264e").enforce,_=a("7c5d"),x=a("831d"),w=a("251f"),k=a("3128"),S=x("match"),F=i.RegExp,R=F.prototype,z=i.SyntaxError,C=s(R.exec),E=s("".charAt),T=s("".replace),D=s("".indexOf),I=s("".slice),M=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,$=/a/g,j=/a/g,O=new F($)!==$,V=g.MISSED_STICKY,L=g.UNSUPPORTED_Y,P=r&&(!O||V||w||k||v((function(){return j[S]=!1,F($)!=$||F(j)==j||"/a/i"!=F($,"i")}))),A=function(e){for(var t,a=e.length,r=0,i="",s=!1;r<=a;r++)t=E(e,r),"\\"!==t?s||"."!==t?("["===t?s=!0:"]"===t&&(s=!1),i+=t):i+="[\\s\\S]":i+=t+E(e,++r);return i},B=function(e){for(var t,a=e.length,r=0,i="",s=[],l={},n=!1,o=!1,c=0,p="";r<=a;r++){if(t=E(e,r),"\\"===t)t+=E(e,++r);else if("]"===t)n=!1;else if(!n)switch(!0){case"["===t:n=!0;break;case"("===t:C(M,I(e,r+1))&&(r+=2,o=!0),i+=t,c++;continue;case">"===t&&o:if(""===p||b(l,p))throw new z("Invalid capture group name");l[p]=!0,s[s.length]=[p,c],o=!1,p="";continue}o?p+=t:i+=t}return[i,s]};if(l("RegExp",P)){for(var G=function(e,t){var a,r,i,s,l,c,g=p(R,this),m=u(e),f=void 0===t,v=[],b=e;if(!g&&m&&f&&e.constructor===G)return e;if((m||p(R,e))&&(e=e.source,f&&(t=h(b))),e=void 0===e?"":d(e),t=void 0===t?"":d(t),b=e,w&&"dotAll"in $&&(r=!!t&&D(t,"s")>-1,r&&(t=T(t,/s/g,""))),a=t,V&&"sticky"in $&&(i=!!t&&D(t,"y")>-1,i&&L&&(t=T(t,/y/g,""))),k&&(s=B(e),e=s[0],v=s[1]),l=n(F(e,t),g?this:R,G),(r||i||v.length)&&(c=y(l),r&&(c.dotAll=!0,c.raw=G(A(e),a)),i&&(c.sticky=!0),v.length&&(c.groups=v)),e!==b)try{o(l,"source",""===b?"(?:)":b)}catch(_){}return l},Y=c(F),q=0;Y.length>q;)m(G,F,Y[q++]);R.constructor=G,G.prototype=R,f(i,"RegExp",G,{constructor:!0})}_("RegExp")},"117f":function(e,t,a){var r=a("a493"),i=a("84e8").MISSED_STICKY,s=a("2044"),l=a("d860"),n=a("264e").get,o=RegExp.prototype,c=TypeError;r&&i&&l(o,"sticky",{configurable:!0,get:function(){if(this!==o){if("RegExp"===s(this))return!!n(this).sticky;throw c("Incompatible receiver, RegExp required")}}})},"133e":function(e,t,a){},"3d53":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"497f":function(e,t,a){var r=a("10b0"),i=a("985f"),s=a("bb38"),l=a("1ed2"),n=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in n||i(e,"flags")||!s(n,e)?t:r(l,e)}},"7a70":function(e,t,a){"use strict";var r=a("10b0"),i=a("e67f"),s=a("2f89"),l=a("4b5b"),n=a("57eb"),o=a("3d53"),c=a("f8b7"),p=a("5de4"),u=a("4f00");i("search",(function(e,t,a){return[function(t){var a=n(this),i=l(t)?void 0:p(t,e);return i?r(i,t,a):new RegExp(t)[e](c(a))},function(e){var r=s(this),i=c(e),l=a(t,r,i);if(l.done)return l.value;var n=r.lastIndex;o(n,0)||(r.lastIndex=0);var p=u(r,i);return o(r.lastIndex,n)||(r.lastIndex=n),null===p?-1:p.index}]}))},a7eb:function(e,t,a){"use strict";var r=a("59db").PROPER,i=a("e549"),s=a("2f89"),l=a("f8b7"),n=a("8241"),o=a("497f"),c="toString",p=RegExp.prototype,u=p[c],d=n((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),h=r&&u.name!=c;(d||h)&&i(RegExp.prototype,c,(function(){var e=s(this),t=l(e.source),a=l(o(e));return"/"+t+"/"+a}),{unsafe:!0})},bb87:function(e,t,a){"use strict";a("133e")},e382:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container",staticStyle:{padding:"0"}},[a("div",{staticClass:"search"},[a("p",[a("span",{staticClass:"label"},[e._v("注册时间：")]),a("el-date-picker",{staticStyle:{width:"340px"},attrs:{align:"right",type:"datetimerange",format:"yyyy-MM-dd HH:mm:ss","default-time":["00:00:00","23:59:59"],"range-separator":"至","start-placeholder":"时间开始","end-placeholder":"时间结束",size:"mini"},on:{change:e.dateChange},model:{value:e.search.date,callback:function(t){e.$set(e.search,"date",t)},expression:"search.date"}}),a("el-radio-group",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini"},on:{change:e.dateTypeChange},model:{value:e.dateType,callback:function(t){e.dateType=t},expression:"dateType"}},[a("el-radio-button",{attrs:{label:"day0"}},[e._v("今天")]),a("el-radio-button",{attrs:{label:"day1"}},[e._v("昨天")]),a("el-radio-button",{attrs:{label:"day2"}},[e._v("前天")])],1)],1),a("p",[a("span",{staticClass:"label"},[e._v("用户ID：")]),a("el-input",{staticStyle:{width:"120px"},attrs:{type:"text",size:"mini",clearable:"",placeholder:"请输入用户id"},model:{value:e.search.user_id,callback:function(t){e.$set(e.search,"user_id",t)},expression:"search.user_id"}}),a("span",{staticClass:"label"},[e._v("昵称：")]),a("el-input",{staticStyle:{width:"160px"},attrs:{type:"text",size:"mini",clearable:"",placeholder:"请输入昵称"},model:{value:e.search.keyword,callback:function(t){e.$set(e.search,"keyword",t)},expression:"search.keyword"}})],1),a("p",[a("span",{staticClass:"label"},[e._v("类型：")]),a("el-radio-group",{attrs:{size:"mini"},model:{value:e.search.is_vip,callback:function(t){e.$set(e.search,"is_vip",t)},expression:"search.is_vip"}},[a("el-radio-button",{attrs:{label:"all"}},[e._v("全部")]),a("el-radio-button",{attrs:{label:"no"}},[e._v("普通用户")]),a("el-radio-button",{attrs:{label:"yes"}},[e._v("VIP会员")])],1)],1),a("p",{staticStyle:{"padding-top":"10px"}},[a("span",{staticClass:"label"}),a("el-button",{attrs:{type:"primary",icon:"el-icon-check",size:"mini"},on:{click:e.doSearch}},[e._v("筛选")]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"default",plain:"",size:"mini"},on:{click:e.doInit}},[e._v("重置")])],1)]),a("div",{staticClass:"box-panel",staticStyle:{"padding-bottom":"10px","margin-bottom":"0"}},[a("el-table",{attrs:{data:e.dataList,stripe:"",size:"medium","header-cell-class-name":"bg-gray"}},[a("el-table-column",{attrs:{prop:"id",label:"用户ID",width:"80"}}),a("el-table-column",{attrs:{prop:"create_time",label:"注册时间",width:"160"}}),a("el-table-column",{attrs:{label:"头像昵称",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("img",{staticStyle:{height:"24px","margin-right":"5px"},attrs:{src:t.row.avatar}}),e._v(" "+e._s(t.row.nickname)+" ")])]}}])}),a("el-table-column",{attrs:{prop:"phone",label:"手机号",width:"180"}}),a("el-table-column",{attrs:{label:"对话余额",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini"},nativeOn:{click:function(a){return a.preventDefault(),e.showRecharge(t.row.id,"chat")}}},[e._v(e._s(t.row.balance)+" 条")])]}}])}),a("el-table-column",{attrs:{label:"绘画余额",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini"},nativeOn:{click:function(a){return a.preventDefault(),e.showRecharge(t.row.id,"draw")}}},[e._v(e._s(t.row.balance_draw)+" 张")])]}}])}),a("el-table-column",{attrs:{label:"GPT4余额",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini"},nativeOn:{click:function(a){return a.preventDefault(),e.showRecharge(t.row.id,"gpt4")}}},[e._v(e._s(t.row.balance_gpt4)+" 万字")])]}}])}),a("el-table-column",{attrs:{label:"会员",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini"},nativeOn:{click:function(a){return a.preventDefault(),e.showVipForm(t.row.id,t.row.vip_expire_time)}}},[e._v(e._s(t.row.vip_expire_time||"未开通"))])]}}])}),a("el-table-column",{attrs:{label:"共消费",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.order_total)+" 元 ")]}}])}),a("el-table-column",{attrs:{label:"共提问",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.msg_count)+" 条 ")]}}])}),a("el-table-column",{attrs:{prop:"commission1",label:"推荐人"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.tuser?a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("img",{staticStyle:{height:"24px","margin-right":"5px"},attrs:{src:t.row.tuser.avatar}}),e._v(" "+e._s(t.row.tuser.nickname)+" [ID: "+e._s(t.row.tuid)+"] ")]):e._e()]}}])})],1),a("div",{staticClass:"footer"},[a("div",{staticClass:"tongji"},[a("i",{staticClass:"el-icon-s-data text-green",staticStyle:{"font-size":"20px"}}),e._v(" 共 "),a("span",{staticClass:"text-green"},[e._v(" "+e._s(e.tongji.userCount)+" ")]),e._v(" 用户，对话余额 "),a("span",{staticClass:"text-danger"},[e._v(" "+e._s(e.tongji.userBalance)+" ")]),e._v("条，绘画余额 "),a("span",{staticClass:"text-danger"},[e._v(" "+e._s(e.tongji.userBalanceDraw)+" ")]),e._v("张，GPT4余额 "),a("span",{staticClass:"text-danger"},[e._v(" "+e._s(e.tongji.userBalanceGpt4)+" ")]),e._v("万字 ")]),a("el-pagination",{attrs:{"current-page":e.page,"page-size":e.pagesize,layout:"total, prev, pager, next",total:e.dataTotal},on:{"current-change":e.pageChange}})],1)],1),e.rechargeForm?a("div",[a("el-dialog",{attrs:{"custom-class":"my-dialog",title:"余额充值",width:"480px",visible:!0,"close-on-click-modal":!1,"append-to-body":!0,"before-close":e.closeRecharge}},[a("el-form",{ref:"form",attrs:{model:e.rechargeForm,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"充值类型",prop:"type"}},[a("el-radio-group",{model:{value:e.rechargeForm["type"],callback:function(t){e.$set(e.rechargeForm,"type",t)},expression:"rechargeForm['type']"}},[a("el-radio",{staticStyle:{margin:"0 20px 5px 0"},attrs:{label:"chat",size:"mini"}},[e._v("对话余额")]),a("el-radio",{attrs:{label:"draw",size:"mini"}},[e._v("绘画余额")]),a("el-radio",{attrs:{label:"gpt4",size:"mini"}},[e._v("GPT4余额")])],1)],1),"chat"===e.rechargeForm.type?a("el-form-item",{attrs:{label:"充值条数",prop:"num"}},[a("el-input",{staticStyle:{width:"130px"},attrs:{placeholder:"填入整数",size:"small"},model:{value:e.rechargeForm.num,callback:function(t){e.$set(e.rechargeForm,"num",t)},expression:"rechargeForm.num"}}),a("span",{staticStyle:{color:"#666","margin-left":"10px"}},[e._v(" 条")]),a("p",{staticStyle:{color:"#999"}},[e._v("正数为增加，负数为减少")])],1):e._e(),"draw"===e.rechargeForm.type?a("el-form-item",{attrs:{label:"充值数量",prop:"num"}},[a("el-input",{staticStyle:{width:"130px"},attrs:{placeholder:"填入整数",size:"small"},model:{value:e.rechargeForm.num,callback:function(t){e.$set(e.rechargeForm,"num",t)},expression:"rechargeForm.num"}}),a("span",{staticStyle:{color:"#666","margin-left":"10px"}},[e._v(" 张")]),a("p",{staticStyle:{color:"#999"}},[e._v("正数为增加，负数为减少")])],1):e._e(),"gpt4"===e.rechargeForm.type?a("el-form-item",{attrs:{label:"充值字数",prop:"num"}},[a("el-input",{staticStyle:{width:"130px"},attrs:{placeholder:"填入整数",size:"small"},model:{value:e.rechargeForm.num,callback:function(t){e.$set(e.rechargeForm,"num",t)},expression:"rechargeForm.num"}}),a("span",{staticStyle:{color:"#666","margin-left":"10px"}},[e._v(" 万字")]),a("p",{staticStyle:{color:"#999"}},[e._v("正数为增加，负数为减少")])],1):e._e()],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"default",icon:"el-icon-close",size:"small"},on:{click:e.closeRecharge}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-check",size:"small"},on:{click:e.doRecharge}},[e._v("提 交")])],1)],1)],1):e._e(),e.vipForm?a("div",[a("el-dialog",{attrs:{"custom-class":"my-dialog",title:"设置vip会员时间",width:"480px",visible:!0,"close-on-click-modal":!1,"append-to-body":!0,"before-close":e.closeVipForm}},[a("el-form",{ref:"form",attrs:{model:e.vipForm,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"到期时间",prop:"vip_expire_time"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"留空则表示关闭会员","value-format":"yyyy-MM-dd",editable:"",clearable:""},model:{value:e.vipForm.vip_expire_time,callback:function(t){e.$set(e.vipForm,"vip_expire_time",t)},expression:"vipForm.vip_expire_time"}}),a("p",[e._v("留空表示关闭会员")])],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"default",icon:"el-icon-close",size:"small"},on:{click:e.closeVipForm}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-check",size:"small"},on:{click:e.setVipTime}},[e._v("提 交")])],1)],1)],1):e._e()])},i=[],s=(a("c36d"),a("7a70"),a("2e69"),a("19e4"),a("08e6"),a("eb0d"),a("117f"),a("a7eb"),a("c24f")),l={data:function(){return{dataList:[],dataTotal:0,page:1,pagesize:15,dateType:"",search:{date:[],user_id:"",is_vip:"all",keyword:""},tongji:{userCount:0,userBalance:0},rechargeForm:null,vipForm:null}},created:function(){this.doInit()},methods:{doInit:function(){this.dateType="",this.search={date:[],user_id:"",is_vip:"all",keyword:""},this.doSearch()},getList:function(){var e=this,t=Object.assign(this.search,{page:this.page,pagesize:this.pagesize});Object(s["h"])(t).then((function(t){e.dataList=t.data.list,e.dataTotal=t.data.count})),1===this.page&&Object(s["g"])(t).then((function(t){e.tongji=t.data}))},tableIndex:function(e){return this.pagesize*(this.page-1)+e+1},pageChange:function(e){this.page=e,this.getList()},doSearch:function(){this.page=1,this.getList()},dateChange:function(){this.dateType=""},dateTypeChange:function(){var e="",t=this.dateFormat(new Date,"yyyy-MM-dd"),a=this.dateFormat(new Date((new Date).setDate((new Date).getDate()-1)),"yyyy-MM-dd"),r=this.dateFormat(new Date((new Date).setDate((new Date).getDate()-2)),"yyyy-MM-dd");"day0"===this.dateType?e=t:"day1"===this.dateType?e=a:"day2"===this.dateType&&(e=r),this.search.date=[e+" 00:00:00",e+" 23:59:59"]},dateFormat:function(e,t){var a={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var r in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+r+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?a[r]:("00"+a[r]).substr((""+a[r]).length)));return t},showRecharge:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"chat";this.rechargeForm={type:t,user_id:e}},closeRecharge:function(){this.rechargeForm=null},doRecharge:function(){var e=this;Object(s["c"])(this.rechargeForm).then((function(t){e.getList(),e.$message({message:t.message,type:"success",duration:1500}),e.closeRecharge()}))},showVipForm:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.vipForm={user_id:e,vip_expire_time:t}},closeVipForm:function(){this.vipForm=null},setVipTime:function(){var e=this;Object(s["l"])(this.vipForm).then((function(t){e.getList(),e.$message.success(t.message),e.closeVipForm()}))}}},n=l,o=(a("bb87"),a("3427")),c=Object(o["a"])(n,r,i,!1,null,"47f15de3",null);t["default"]=c.exports},eb0d:function(e,t,a){var r=a("a493"),i=a("251f"),s=a("2044"),l=a("d860"),n=a("264e").get,o=RegExp.prototype,c=TypeError;r&&i&&l(o,"dotAll",{configurable:!0,get:function(){if(this!==o){if("RegExp"===s(this))return!!n(this).dotAll;throw c("Incompatible receiver, RegExp required")}}})}}]);