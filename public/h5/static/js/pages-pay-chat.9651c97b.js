(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-pay-chat"],{"439f":function(t,a,e){"use strict";e.r(a);var i=e("ef60"),o=e("e378");for(var n in o)["default"].indexOf(n)<0&&function(t){e.d(a,t,(function(){return o[t]}))}(n);e("e785");var s=e("f0c5"),d=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,"0c56afe2",null,!1,i["a"],void 0);a["default"]=d.exports},"63f4":function(t,a,e){"use strict";e("7a82"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,e("d3b7"),e("159b");var i=getApp(),o={data:function(){return{pageIsLoad:!1,system:"",balance:0,vip_expire_time:"",goodsList:[],goods_id:0,paying:!1}},onLoad:function(t){var a=this;this.setData({system:i.globalData.system}),i.globalData.util.checkLogin().then((function(){a.getBalance(),a.getGoodsList(),a.setData({pageIsLoad:!0})}))},onShow:function(){this.pageIsLoad&&this.getBalance()},methods:{getBalance:function(){var t=this;i.globalData.util.request({url:"/h5/getBalance",loading:!1}).then((function(a){t.setData({balance:a.data.balance,vip_expire_time:a.data.vip_expire_time})}))},getGoodsList:function(){var t=this;i.globalData.util.request({url:"/order/getGoodsList"}).then((function(a){var e=a.data;e.forEach((function(a){a.is_default&&t.setData({goods_id:a.id})})),t.setData({goodsList:e})}))},chooseGoods:function(t){var a=t.currentTarget.dataset.id;this.setData({goods_id:a})},doPayGoods:function(){var t=this;if(this.paying)return!1;var a=this.goods_id;if(0==a)return i.globalData.util.message("请选择充值套餐"),!1;this.setData({paying:!0}),setTimeout((function(){t.setData({paying:!1})}),2e3),i.globalData.util.request({url:"/h5/createOrder",data:{goods_id:a}}).then((function(t){i.globalData.jssdk.chooseWXPay({timestamp:t.data.timeStamp,nonceStr:t.data.nonceStr,package:t.data.package,signType:t.data.signType,paySign:t.data.paySign,success:function(t){i.globalData.util.message("支付成功","error",(function(){uni.redirectTo({url:"/pages/user/index"})}))},fail:function(t){i.globalData.util.message("发起支付失败","error")}})}))}}};a.default=o},"8fd9":function(t,a,e){var i=e("cb83");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=e("4f06").default;o("18c1ff28",i,!0,{sourceMap:!1,shadowMode:!1})},cb83:function(t,a,e){var i=e("24fb");a=i(!1),a.push([t.i,"uni-page-body[data-v-0c56afe2]{margin:0;padding:0;background:#f7f7f7;font-family:微软雅黑;padding-bottom:%?30?%}body.?%PAGE?%[data-v-0c56afe2]{background:#f7f7f7}.mod-title[data-v-0c56afe2]{padding:%?30?% %?30?%;font-size:%?32?%}.mod-title uni-text[data-v-0c56afe2]{padding-left:%?16?%;border-left:%?8?% solid #04babe;line-height:%?24?%;height:%?30?%}.wallet[data-v-0c56afe2]{height:%?160?%;background:#04babe;display:flex;flex-direction:column;align-items:center;justify-content:center;color:#fff;padding-bottom:%?110?%;margin-bottom:%?-80?%}.wallet .balance[data-v-0c56afe2]{font-size:%?36?%;text-align:center}.wallet .balance uni-text[data-v-0c56afe2]{font-size:%?48?%;margin:0 %?14?%;color:red;font-weight:700}.wallet .vip[data-v-0c56afe2]{color:#eee}.wallet .tips[data-v-0c56afe2]{font-size:%?24?%;color:#eed196;font-weight:400;padding:%?6?% %?20?%;border-radius:%?10?%;background:#333}.goods-list[data-v-0c56afe2]{padding:0 0 %?20?% 0}.goods[data-v-0c56afe2]{background:#f3f6f9;width:%?292?%;height:%?206?%;border-radius:%?20?%;text-align:center;padding:%?20?% 0;float:left;margin-right:%?30?%;box-sizing:border-box;border:%?6?% solid #f3f6f9;margin-top:%?30?%}.goods .title[data-v-0c56afe2]{font-size:%?48?%;display:flex;align-items:baseline;justify-content:center;font-weight:700}.goods .title .unit[data-v-0c56afe2]{font-size:%?28?%;margin-left:%?20?%;font-weight:400}.goods .price[data-v-0c56afe2]{font-size:%?28?%;margin:%?10?% 0;color:#444}.goods .price uni-text[data-v-0c56afe2]{color:red;margin:0 %?6?%}.goods .market_price[data-v-0c56afe2]{color:#999;text-decoration:line-through;font-size:%?24?%}.goods.active[data-v-0c56afe2]{border-color:#04babe}.btn-pay[data-v-0c56afe2]{width:%?400?%;height:%?80?%;padding:%?10?%;background-color:#04babe;border-radius:%?100?%;color:#fff;font-size:%?30?%;border:none;outline:none;margin:%?100?% 0 %?30?% %?110?%;box-sizing:border-box;display:flex;justify-content:center;align-items:center;letter-spacing:%?2?%}.btn-pay[data-v-0c56afe2]::after{display:none}.btn-pay[data-v-0c56afe2]:active{-webkit-transform:scale(.9);transform:scale(.9)}.box[data-v-0c56afe2]{width:%?690?%;background:#fff;margin:0 %?30?% %?30?% %?30?%;border-radius:%?20?%;overflow:hidden;padding:%?20?% %?40?%;box-sizing:border-box}.box .box-title[data-v-0c56afe2]{width:100%;height:%?72?%;line-height:%?72?%;font-size:%?32?%;color:#333;font-weight:700}.box .box-title .desc[data-v-0c56afe2]{font-weight:400;color:#999;font-size:%?24?%;margin-left:%?20?%}",""]),t.exports=a},e378:function(t,a,e){"use strict";e.r(a);var i=e("63f4"),o=e.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){e.d(a,t,(function(){return i[t]}))}(n);a["default"]=o.a},e785:function(t,a,e){"use strict";var i=e("8fd9"),o=e.n(i);o.a},ef60:function(t,a,e){"use strict";e.d(a,"b",(function(){return i})),e.d(a,"c",(function(){return o})),e.d(a,"a",(function(){}));var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",{staticClass:"wrap"},[e("v-uni-view",{staticClass:"wallet"},[e("v-uni-view",{staticClass:"balance",staticStyle:{"margin-top":"12rpx"}},[t._v("对话余额"),e("v-uni-text",[t._v(t._s(t.balance))]),t._v("条")],1),t.vip_expire_time?e("v-uni-view",{staticStyle:{"margin-top":"20rpx"}},[e("v-uni-text",{staticClass:"tips"},[t._v("您已开通vip会员，期间不消耗余额")])],1):t._e()],1),t.goodsList&&t.goodsList.length>0?e("v-uni-view",{staticClass:"box",staticStyle:{"padding-right":"0"}},[e("v-uni-view",{staticClass:"box-title"},[e("v-uni-text",[t._v("充值对话次数")]),e("v-uni-text",{staticClass:"desc"},[t._v("永不过期，文字类对话可用")])],1),e("v-uni-view",{staticClass:"goods-list"},[t._l(t.goodsList,(function(a,i){return e("v-uni-view",{key:i,class:"goods "+(a.id==t.goods_id?"active":""),attrs:{"data-id":a.id},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.chooseGoods.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"title"},[e("v-uni-text",{staticClass:"num"},[t._v(t._s(a.num))]),e("v-uni-text",{staticClass:"unit"},[t._v("条")])],1),e("v-uni-view",{staticClass:"price"},[t._v("特价"),e("v-uni-text",[t._v(t._s(a.price/100))]),t._v("元")],1),a.market_price>0?e("v-uni-view",{staticClass:"market_price"},[t._v("原价"+t._s(a.market_price/100)+"元")]):t._e()],1)})),e("v-uni-view",{staticStyle:{clear:"both"}})],2),e("v-uni-button",{staticClass:"btn-pay",attrs:{disabled:!t.goods_id||t.paying},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.doPayGoods.apply(void 0,arguments)}}},[t._v("立即充值")])],1):t._e()],1)},o=[]}}]);