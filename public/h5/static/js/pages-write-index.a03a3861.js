(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-write-index"],{"038f":function(t,a,e){"use strict";e("7a82");var i=e("4ea4").default;Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,e("d3b7"),e("159b");var o=i(e("870f")),n=getApp(),s={components:{pages:o.default},data:function(){return{topicList:[],tabWidth:160,promptList:[],promptCount:0,page:1,pagesize:10,scrollTop:0,shareTitle:"",shareImage:"",timeline_share_id:0,topic_id:"all",system:""}},onLoad:function(t){var a=this;this.setData({system:n.globalData.system}),n.globalData.util.checkLogin().then((function(){a.getTopicList(),a.getPrompts()}))},methods:{switchTopic:function(t){var a=t.currentTarget.dataset.topic;this.setData({topic_id:a}),"vote"==a?(this.setData({page:1,promptList:[]}),this.getVotePrompts()):(this.setData({page:1}),this.getPrompts())},getTopicList:function(){var t=this;n.globalData.util.request({url:"/write/getTopicList"}).then((function(a){t.setData({topicList:a.data}),t.calcTabWidth()}))},calcTabWidth:function(){var t=this,a=this.topicList,e=160,i=0;a.forEach((function(a){i=t.strLen(a.title),e+=20*i})),this.setData({tabWidth:e})},strLen:function(t){for(var a=0,e=0;e<t.length;e++)t.charCodeAt(e)>=0&&t.charCodeAt(e)<=128?a+=1:a+=2;return a},getPrompts:function(){var t=this,a=this.topic_id,e=this.page,i=this.pagesize;n.globalData.util.request({url:"/write/getPrompts",data:{topic_id:a,page:e,pagesize:i}}).then((function(a){t.setData({promptList:a.data.list,promptCount:a.data.count}),t.scrollToTop()}))},getVotePrompts:function(){var t=this,a=this.page,e=this.pagesize;n.globalData.util.request({url:"/write/getVotePrompts",data:{page:a,pagesize:e}}).then((function(a){t.setData({promptList:a.data.list,promptCount:a.data.count}),t.scrollToTop()}))},pageChange:function(t){var a=t.detail;this.setData({page:a}),"vote"==this.topic_id?this.getVotePrompts():this.getPrompts()},doVote:function(t){var a=this,e=t.currentTarget.dataset.id;n.globalData.util.request({url:"/write/votePrompt",data:{prompt_id:e}}).then((function(t){n.globalData.util.message(t.message);var i=a.promptList;for(var o in i)i[o].id==e&&(i[o].isVote?i[o].isVote=0:i[o].isVote=1);a.setData({promptList:i})}))},scrollToTop:function(){var t=this;setTimeout((function(){t.setData({scrollTop:0})}),100)},toWriteChat:function(t){var a=t.currentTarget.dataset.id;uni.navigateTo({url:"/pages/write/chat?prompt_id="+a})}}};a.default=s},"23fa":function(t,a,e){"use strict";e.r(a);var i=e("9555"),o=e("d1da");for(var n in o)["default"].indexOf(n)<0&&function(t){e.d(a,t,(function(){return o[t]}))}(n);e("cdcea");var s=e("f0c5"),r=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,"562a59fe",null,!1,i["a"],void 0);a["default"]=r.exports},"3b2a":function(t,a,e){var i=e("24fb");a=i(!1),a.push([t.i,".pages[data-v-841f10f4]{text-align:center;padding:%?20?% 0}.pages uni-text[data-v-841f10f4]{display:inline-block;background:#fff;padding:%?12?% %?30?%;font-size:%?30?%;margin:0 %?20?%;border-radius:%?10?%;color:#666}.pages uni-text[data-v-841f10f4]:active{background:#04babe;color:#fff}.pages .form-block[data-v-841f10f4]{background-color:#fff;padding:%?30?% %?100?% %?30?% %?100?%;box-sizing:border-box;margin-bottom:%?20?%}.pages .form-label[data-v-841f10f4]{margin:0;padding:%?24?% 0 %?24?%;color:#333;font-weight:400;font-size:%?28?%;line-height:%?32?%}",""]),t.exports=a},"3cb9":function(t,a,e){var i=e("24fb");a=i(!1),a.push([t.i,"uni-page-body[data-v-562a59fe]{background:#fff;padding-top:%?88?%;overflow-x:hidden}body.?%PAGE?%[data-v-562a59fe]{background:#fff}.page[data-v-562a59fe]{overflow-x:hidden}[data-v-562a59fe]::-webkit-scrollbar{width:0;height:0;color:transparent}.tab-nav[data-v-562a59fe]{position:fixed;top:0;width:100%;height:%?88?%;line-height:%?88?%;background-color:#f4fcfb;box-sizing:border-box;z-index:99;border-top:%?1?% solid #eee;border-bottom:%?1?% solid #eee;overflow:hidden;overflow-x:auto}.tab-list[data-v-562a59fe]{width:auto;height:100%;display:flex;justify-content:space-between;align-items:center;padding:0 %?20?%}.tab[data-v-562a59fe]{font-size:%?28?%;color:#233445;height:%?88?%;line-height:%?88?%;text-align:center;padding:0 %?6?%;position:relative;box-sizing:border-box;border-bottom:%?6?% solid #fff}.tab.active[data-v-562a59fe]{color:#04babe;border-bottom:%?6?% solid #04babe}.activitys[data-v-562a59fe]{width:100%;padding:%?20?% 0 0 %?20?%;background-color:#f3f6f9}.activitys .act-item[data-v-562a59fe]{padding:%?10?% %?20?%;border:1px solid #ccc;color:#666;margin:0 %?20?% %?20?% 0;float:left;display:block;border-radius:%?10?%;font-size:%?24?%}.activitys .act-item.active[data-v-562a59fe]{color:#04babe;border-color:#04babe}.prompt-list[data-v-562a59fe]{width:100%;background-color:#fff;padding:%?30?% 0 0 %?30?%}.prompt-item[data-v-562a59fe]{background:#f7f7f8;padding:%?20?% %?30?%;border-radius:%?14?%;margin:0 %?20?% %?20?% 0;float:left;width:%?280?%;font-family:微软雅黑;height:%?220?%;overflow:hidden;position:relative}.prompt-item[data-v-562a59fe]:active{background:#f0f0f0}.prompt-item .title[data-v-562a59fe]{font-size:%?28?%;font-weight:700;line-height:%?44?%;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden}.prompt-item .desc[data-v-562a59fe]{font-size:%?24?%;color:#888;margin-top:%?10?%;line-height:%?36?%;height:%?108?%;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:3;overflow:hidden}.prompt-item .ops[data-v-562a59fe]{display:flex;align-items:center;justify-content:space-between;height:%?64?%;position:absolute;width:100%;left:0;bottom:0;padding:%?10?% %?30?%;box-sizing:border-box;background:#f7f7f8}.prompt-item .ops .op-item[data-v-562a59fe]{display:flex;align-items:center;color:#8e8ea0;font-size:%?24?%}.prompt-item .ops .op-item .icon[data-v-562a59fe]{width:%?28?%;height:%?28?%;margin-right:%?10?%}.empty[data-v-562a59fe]{text-align:center;margin:0 %?60?%;padding:%?80?% 0 %?100?% 0;margin-top:%?120?%;border-radius:%?20?%}.empty uni-image[data-v-562a59fe]{width:%?240?%;height:%?240?%}.box-input[data-v-562a59fe]{width:100%;padding:%?40?% 0 0 0;left:0;bottom:0;border-top:1px solid #d8d8e2;background:#f6f9fc}.box-input .input[data-v-562a59fe]{width:%?690?%;margin:0 %?30?%;position:relative;box-sizing:border-box;box-shadow:0 0 %?12?% rgba(0,0,0,.15);background:#fefefe}.box-input .input uni-textarea[data-v-562a59fe]{width:%?580?%;padding:%?20?% %?10?% %?20?% %?20?%;border-radius:%?10?%;line-height:%?40?%}.box-input .input .btn-send[data-v-562a59fe]{position:absolute;right:0;bottom:0;width:%?100?%;height:%?80?%;padding:0;border:none;border-radius:%?10?%;background:none;display:flex;align-items:center;justify-content:center;z-index:9}.box-input .input .btn-send[data-v-562a59fe]::after{display:none}.box-input .input .btn-send[data-v-562a59fe]:active{background:#f2f2f2}.box-input .input .btn-send uni-image[data-v-562a59fe]{width:%?40?%}.btn-finish[data-v-562a59fe]{width:60%;height:%?80?%;line-height:%?80?%;border-radius:%?48?%;border:none;color:#fff;margin:%?240?% auto 0 20%;box-shadow:0 0 %?20?% rgba(0,235,79,.1);font-size:%?30?%;letter-spacing:%?4?%;outline:none;background:#39b54a;text-align:center}.box-msg-list[data-v-562a59fe]{width:100%;height:100%;top:%?188?%;bottom:%?132?%;left:0;box-sizing:border-box;overflow:hidden}.list[data-v-562a59fe]{width:100%;height:auto}.message[data-v-562a59fe]{display:flex;justify-content:flex-start;padding:%?40?% %?40?%;border-bottom:%?2?% solid #eee}.message[data-v-562a59fe]:last-child{border-bottom:0}.message .text[data-v-562a59fe]{width:100%;color:#343541;line-height:%?60?%;font-size:%?32?%;word-break:break-all}.message .avatar[data-v-562a59fe]{width:%?48?%;height:%?48?%;background:#10a37f;margin-right:%?30?%;color:#fff;font-size:%?28?%;border-radius:%?4?%;display:flex;align-items:center;justify-content:center;margin-top:%?6?%}.message .avatar uni-image[data-v-562a59fe]{width:%?36?%}.account[data-v-562a59fe]{margin:%?20?% %?30?%;padding:%?16?% %?24?% %?16?% %?24?%;box-sizing:border-box;\r\n    /* background: #f3f6f9; */border-radius:%?10?%;display:flex;justify-content:space-between;align-items:center}.account .balance[data-v-562a59fe]{color:#666;font-size:%?24?%}.account .balance uni-text[data-v-562a59fe]{color:#10a37f;margin-right:%?6?%}.account .btn-pay[data-v-562a59fe]{display:inline-block;color:#10a37f;margin-left:%?20?%;font-size:%?24?%}.banner-ad[data-v-562a59fe]{width:100%;height:%?120?%;border-top:%?2?% solid #ddd}",""]),t.exports=a},"4d66":function(t,a,e){var i=e("3b2a");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=e("4f06").default;o("c9871064",i,!0,{sourceMap:!1,shadowMode:!1})},"5eae":function(t,a,e){"use strict";e.d(a,"b",(function(){return i})),e.d(a,"c",(function(){return o})),e.d(a,"a",(function(){}));var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",{staticClass:"pages"},[e("v-uni-text",{staticClass:"prev",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.doPrev.apply(void 0,arguments)}}},[t._v("上页")]),e("v-uni-text",{staticClass:"current",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.showPageInputFun.apply(void 0,arguments)}}},[t._v(t._s(t.page)+" / "+t._s(t.pageMax))]),e("v-uni-text",{staticClass:"next",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.doNext.apply(void 0,arguments)}}},[t._v("下页")])],1)},o=[]},"870f":function(t,a,e){"use strict";e.r(a);var i=e("5eae"),o=e("f4a1");for(var n in o)["default"].indexOf(n)<0&&function(t){e.d(a,t,(function(){return o[t]}))}(n);e("8d0d");var s=e("f0c5"),r=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,"841f10f4",null,!1,i["a"],void 0);a["default"]=r.exports},"8d0d":function(t,a,e){"use strict";var i=e("4d66"),o=e.n(i);o.a},9555:function(t,a,e){"use strict";e.d(a,"b",(function(){return i})),e.d(a,"c",(function(){return o})),e.d(a,"a",(function(){}));var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",{staticClass:"page"},[t.topicList&&t.topicList.length>0?e("v-uni-scroll-view",{staticClass:"tab-nav",attrs:{"scroll-x":!0}},[e("v-uni-view",{staticClass:"tab-list",style:"width: "+t.tabWidth+"rpx;"},[e("v-uni-view",{class:"tab "+("vote"==t.topic_id?"active":""),attrs:{"data-topic":"vote"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.switchTopic.apply(void 0,arguments)}}},[t._v("收藏")]),e("v-uni-view",{class:"tab "+("all"==t.topic_id?"active":""),attrs:{"data-topic":"all"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.switchTopic.apply(void 0,arguments)}}},[t._v("全部")]),t._l(t.topicList,(function(a,i){return e("v-uni-view",{key:i,class:"tab "+(t.topic_id==a.id?"active":""),attrs:{"data-topic":a.id},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.switchTopic.apply(void 0,arguments)}}},[t._v(t._s(a.title))])}))],2)],1):t._e(),t.promptList&&t.promptList.length>0?e("v-uni-view",{staticClass:"prompt-list"},[t._l(t.promptList,(function(a,i){return e("v-uni-view",{key:i,staticClass:"prompt-item"},[e("v-uni-view",{attrs:{"data-id":a.id},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.toWriteChat.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"title"},[t._v(t._s(a.title))]),e("v-uni-view",{staticClass:"desc"},[t._v(t._s(a.desc))])],1),e("v-uni-view",{staticClass:"ops"},[e("v-uni-view",{staticClass:"op-item"},[e("v-uni-image",{staticClass:"icon",attrs:{src:"/static/images/write/ic_views.png"}}),t._v(t._s(a.views))],1),e("v-uni-view",{staticClass:"op-item"},[e("v-uni-image",{staticClass:"icon",attrs:{src:"/static/images/write/ic_usages.png"}}),t._v(t._s(a.usages))],1),e("v-uni-view",{staticClass:"op-item",attrs:{"data-id":a.id},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.doVote.apply(void 0,arguments)}}},[1==a.isVote?e("v-uni-image",{staticClass:"icon",attrs:{src:"/static/images/write/ic_vote_active.png"}}):e("v-uni-image",{staticClass:"icon",attrs:{src:"/static/images/write/ic_vote.png"}})],1)],1)],1)})),e("v-uni-view",{staticStyle:{clear:"both"}})],2):e("v-uni-view",{staticClass:"empty"},[e("v-uni-image",{attrs:{src:"/static/images/nodata.png"}})],1),t.promptList&&t.promptCount>t.pagesize?e("v-uni-view",{staticStyle:{padding:"30rpx 0 30rpx 0",width:"100%"}},[e("pages",{attrs:{count:t.promptCount,pagesize:t.pagesize,page:t.page},on:{change:function(a){arguments[0]=a=t.$handleEvent(a),t.pageChange.apply(void 0,arguments)}}})],1):t._e()],1)},o=[]},"9c22":function(t,a,e){"use strict";e("7a82"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,e("a9e3");var i={data:function(){return{pageMax:1,pageInput:"",showPageInput:!1}},props:{page:{type:Number,default:0},pagesize:{type:Number},count:{type:Number}},watch:{count_pagesize:{deep:!0,immediate:!0,handler:function(t,a){t.count,t.pagesize;this.setData({pageMax:Math.ceil(this.count/this.pagesize)})}}},methods:{doPageChange:function(){this.$emit("change",{detail:this.pageInput}),this.closePageInput()},doPrev:function(){this.page>1&&this.$emit("change",{detail:this.page-1})},doNext:function(){this.page<this.pageMax&&this.$emit("change",{detail:this.page+1})},showPageInputFun:function(){this.setData({pageInput:this.page,showPageInput:!0})},closePageInput:function(){this.setData({showPageInput:!1})}},created:function(){},computed:{count_pagesize:function(){var t=this.count,a=this.pagesize;return{count:t,pagesize:a}}}};a.default=i},ae60:function(t,a,e){var i=e("3cb9");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=e("4f06").default;o("fcaf889c",i,!0,{sourceMap:!1,shadowMode:!1})},cdcea:function(t,a,e){"use strict";var i=e("ae60"),o=e.n(i);o.a},d1da:function(t,a,e){"use strict";e.r(a);var i=e("038f"),o=e.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){e.d(a,t,(function(){return i[t]}))}(n);a["default"]=o.a},f4a1:function(t,a,e){"use strict";e.r(a);var i=e("9c22"),o=e.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){e.d(a,t,(function(){return i[t]}))}(n);a["default"]=o.a}}]);